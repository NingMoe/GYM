
<!DOCTYPE html>
<html style="height: 100%;">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>支付中心</title>
    <link rel="stylesheet" href="http://cdn.tmooc.cn/tmooc-web/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://cdn.tmooc.cn/tmooc-web/css/iconfont.css">
    <link rel="stylesheet" href="http://cdn.tmooc.cn/tmooc-web/css/customScrollbar/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="http://cdn.tmooc.cn/tmooc-web/css/style.css" />
        <script src="js/jquery-2.1.1.js"></script>
    
</head>

<body class="bgcolor-f6f5fa">
    <div class="page-header">
        <div class="md2018033001lty">
    <div class="container">
        <div class="tmooc-logo pull-left">
            <a href="http://www.tmooc.cn">
                <img class="default-logo" src="http://cdn.tmooc.cn/tmooc-web/css/img/tmooc-logo.png"/>
                <img class="blue-logo" src="http://cdn.tmooc.cn/tmooc-web/css/img/tmooc-logo2.png"/>
            </a>
        </div>
        <div id="no-login-nav">
	        <ul class="slide-nav pull-left clearfix" id="js_slide_nav">
	            <li><a href="http://www.tmooc.cn">首页</a></li>
	            <li><a href="http://www.tmooc.cn/free/">免费课</a></li>
	            <li><a href="http://www.tmooc.cn/live/">直播课</a></li>
	            <li><a href="http://www.tmooc.cn/vip/">会员课</a></li>
	            <li><a href="http://www.tmooc.cn/advanced/">精品课</a></li>
	            <li><a href="javascript:void(0);" onclick="checkTtsUser()">线上班（VIP）</a></li>
	            <li><a href="http://www.tmooc.cn/offline_courses/">线下班</a></li>
	            <!-- <li><a href="http://www.tmooc.cn/activities/">最新活动</a></li> -->
	        </ul>
        </div>
        <div class="hide" id="login-nav">
	        <ul class="slide-nav pull-left clearfix" id="js_slide_nav">
	            <li><a href="http://www.tmooc.cn">首页</a></li>
	            <li><a href="http://www.tmooc.cn/free/">免费课</a></li>
	            <li><a href="http://www.tmooc.cn/live/">直播课</a></li>
	            <li><a href="http://www.tmooc.cn/vip/">会员课</a></li>
	            <li><a href="http://www.tmooc.cn/advanced/">精品课</a></li>
	            <li><a href="javascript:void(0);" onclick="checkTtsUser()">线上班（VIP）</a></li>
	            <li><a href="http://www.tmooc.cn/offline_courses/">线下班</a></li>
	            <!--<li><a href="http://www.tmooc.cn/activities/">最新活动</a></li>-->
	            <li><a href="http://uc.tmooc.cn/userCenter/toUserSingUpCoursePage">我的课程</a></li>
	        </ul>
        </div>
        <div class="login-area pull-right " id="login_statelty">
            <!--未登录状态-->
            <ul class="no-login clearfix">
                <li><a id="register_xxw" href="http://uc.tmooc.cn/login/jumpToRegister">注册</a></li>
                <li class="line">|</li>
                <li><a id="login_xxw" href="#">登录</a></li>
            </ul>
            <!--登录状态-->
            <div class="logined hide">
                <div class="md-2018040202-lty">
                    <div class="drop-menu" id="js_init_dropmenu">
                        <div class="md-2018040801-lty">
                            <a href="http://uc.tmooc.cn/userCenter/toUserCenterPage">
                                <img class="js-headpic-xxw" id="tobbar_userimg" src="http://cdn.tmooc.cn/tmooc-web/css/img/user-head.jpg" alt=""/>
                            </a>
                        </div>
                        <ul class="drop-menu-list bgcolor-fff">
<!--                             <li class="user-name link-color"><a href="#" id="tobbar_username">XXX</a></li>
 -->                           
                             <li class="user-name link-color"><a href="http://uc.tmooc.cn/userCenter/toUserCoursePage" id="tobbar_username">我的课程</a></li>
 							 <li><a href="#" id="js_go_ynote">我的云笔记</a></li>
 							 <li><a href="http://uc.tmooc.cn/userCenter/jumpToUserCenterInfo" >账号设置</a></li>
 							<li><a href="http://uc.tmooc.cn/tmoocVipCenter/vipcenter" >会员中心</a></li>
    <!--                       <li id="js_isshow_tts" style="display: none;"><a style="cursor: pointer;" onclick="checkTtsUser()">我的TTS</a></li> -->
                           <li><a href="#" id="js_loginout">退出登录</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="search-wrap pull-right">
            <div class="search-area">
                <input id="js_search_inp" type="text" class="search-input" placeholder="您想学的课程"/>
            </div>
            <div class="showhide-search" id="js_control_search">
                <i class="cusfont cusfont-search"></i>
            </div>
        </div>
    </div>
</div>
    </div>

    <div class="page-body pay-body-xxw">
        <div class="container">
            <div class="tit-0313">支付中心</div>
            <div class="md-2019031301-xxw">
                <div class="d1">订单信息</div>
                <div class="d2 clearfix order-info">
                    <div class="order-img pull-left">
                        <img  id="order-url" attr="">
                    </div>
                    <div class="order-text pull-left" id="order-name">
                    </div>
                </div>
                <div class="line"></div>
                <div class="d1">支付方式</div>
                <div class="d3 clearfix">
                    <p class="pay-list pull-left active" data-type="alipay">
                        <img src="http://cdn.tmooc.cn/tmooc-web/css/img/img_19031303_x.jpg">
                    </p>
                    <p class="pay-list pull-left" data-type="wx">
                        <img src="http://cdn.tmooc.cn/tmooc-web/css/img/img_19031304_x.jpg">
                    </p>
                </div>
                <div class="line"></div>
                <div class="d4 clearfix">
                    <div class="pull-left left">
                        <input type="checkbox" id="courseService"> 同意<a
                            href="http://www.tmooc.cn/user-agreement/course/index.shtml" target="_blank">课程服务协议</a>
                    </div>
                    <div class="pull-right right">
                        应付金额：<span id="price"></span>
                    </div>
                </div>
                <div class="d5 text-right">
                    <button id="toBuy">立即支付</button>
                </div>
            </div>
        </div>
    </div>

    <!-- wxpay model -->
    <div style="display: none;">
        <div id="js_wxpay" class="md-20190729-cj-wxpay">
            <!-- <div class="overlay"></div> -->
            <div class="pay-wrp clearfix">
                <span class="close-btn pull-right"><i class="cusfont cusfont-close font-14 js-closewin-btn"></i></span>
                <div class="cont">
                    <p id="js_wxDuration" class="time">&nbsp;</p>
                    <p id="js_wxMoney" class="money">微信支付 ¥0.00</p>
                    <div id="js_wxQR" class="qr-wrp"></div>
                    <p class="info">使用微信扫描二维码进行支付</p>
                </div>
            </div>
        </div>
    </div>

    <div id="form_pay" style="display:none;"></div>
    <div class="page-footer">
        <div class="container">
    <div class="md2018040301lty clearfix">
        <div class="bt-fr clearfix pull-right">
            <div class="b-info text-right pull-left">
                <p>达内精品在线WWW.TMOOC.CN 专注于IT职业技能培训 </p>
                <p>涵盖20余门课程体系，致力于打造权威的IT职业教育学习平台</p>
            </div>
            <div class="ewm-b pull-left">
                <img src="http://cdn.tmooc.cn/tmooc-web/css/img/erweima.jpg" width="75" height="75" alt="" />
            </div>
        </div>
        <div class="bt-lf clearfix pull-left">
            <ul class="links clearfix">
                <li><a href="http://www.tmooc.cn/aboutus/index.shtml">关于我们</a></li>
                <li>|</li>
                <li><a href="http://www.tmooc.cn/join/index.shtml">招聘信息</a></li>
                <li>|</li>
                <li><a href="http://www.tmooc.cn/contactus/index.shtml">联系我们</a></li>
                <li>|</li>
                <li><a href="http://www.tmooc.cn/business/index.shtml">商务合作</a></li>
                <!-- <li>|</li>
                <li><script src="https://s13.cnzz.com/z_stat.php?id=1273669604&web_id=1273669604" language="JavaScript"></script></li> -->
                <li>|</li>
                <li><a href="http://tts.tmooc.cn/ttsPage/vipService.html" target="_blank">VIP服务</a></li>
				<li>|</li>
				<li><a href="http://www.tmooc.cn/app/index.shtml" target="_blank">APP</a></li>
            </ul> 
             <div class="copyright">Copyright © 北京达内金桥科技有限公司版权所有 京ICP备12003709号-3
                <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802029572" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;color:#666;">
                    <img src="http://cdn.tmooc.cn/tmooc-web/css/img/beianh2019082901.png" style="float:left;margin: 0 5px;"/>
                    <span>京公网安备 11010802029572号</span></a>
            </div> 
        </div>
        <div class="bt-line"></div>
    </div>
</div>
<!-- 登录弹窗 -->
<div style="display: none;">
    <div class="md-2018040402-ll cus-win-model js-md-180417-login-cj" id="login_boxxxw">
        <div class="js-log-type" data-logtype='0'>
            <div class="tit">登录</div>
            <div id="js_login_form" class="form-ele-box">
                <div class="form-item clearfix">
                    <div class="form-inp-area">
                        <input id="js_account_pm" class="form-input" value="" type="text" cusrule="mail_phone" placeholder="邮箱或手机号" autocomplete="off">
                        <span class="form-tips">邮箱或手机号格式错误</span>
                    </div>
                </div>
                <div class="form-item clearfix">
                    <div class="form-inp-area">
                        <input id="js_password" class="form-input" value="" type="password" placeholder="密码" autocomplete="off">
                        <span class="form-tips">包含数字、字母、下划线的6-18位</span>
                    </div>
                </div>
                <div id="js_validate_img_area" class="form-item clearfix" style="display: none;">
                    <div class="form-inp-area">
                        <input id="js_imgcode" class="form-input pull-left" value="" type="text" placeholder="验证码" style="width: 80px; margin-right: 15px;" autocomplete="off">
                        <img id="js_validate_img" class="pull-left code-img js-validate-img" src="" height="40px" width="80px" style="cursor:pointer; margin-right: 15px;">
                        <div class="form-inlineblock pull-left code-btn js-validate-img">
                            <span class="verflag" style="cursor:pointer;">看不清楚？换一张</span>
                            <i class="verflag"></i>
                        </div>
                        <span class="form-tips">验证码格式错误</span>
                    </div>
                </div>
                <div class="form-item clearfix">
                    <button id="js_submit_login" class="form-btn form-btn-blue width-100" type="button">登录</button>
                </div>
                <div class="form-item clearfix" style="font-size: 12px;">
                    <div class="form-checkbox pull-left" style="display: none;">
                        <label><input type="checkbox" checked="checked" /><span>下次自动登录</span></label>
                    </div>
                    <div class="pull-right color-aaa" style="padding-top: 2px;">
                        <a href="http://uc.tmooc.cn/login/jumpToUserFindPassword" class="color-aaa">忘记密码</a>&nbsp;|&nbsp;<a href="http://uc.tmooc.cn/login/jumpToRegister" class="color-aaa">注册</a>
                    </div>
                </div>
                <div class="other-loginbox">
                    <p class="c-tit color-aaa text-center">第三方账号登录</p>
                    <div class="c-btns">
                        <div class="c-fbtn">
                            <a class="c-btn js-log-type-cut"><i class="cusfont cusfont-wechat"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="js-log-type" data-logtype='3' style="display: none;">
            <div id="js_wx_code_log" class="text-center"></div>
            <div class="other-loginbox">
                <div class="c-btns">
                    <div class="c-fbtn js-log-type-cut">返回账号登录</div>
                </div>
            </div>
        </div>
        <span class="cus-win-modelclose js-closewin-btn"><i class="cusfont cusfont-close font-14"></i></span>
    </div>
</div>
<!-- 登录弹窗 end -->
<!-- 支付状态弹窗 start  -->
<div style="display: none;">
    <div class="md-2018040423-ll cus-win-model" id="md_2018040423_ll">
        <div class="tit">支付完成</div>
        <p style="text-align: center;"><img src="http://cdn.tmooc.cn/tmooc-web/css/img/img2018042301_ll.png"/></p>
        <div style="text-align: center; padding-top: 10px;">
            <p class="color-red" id="js_error_tips" style="margin: 5px 0;opacity: 0;"><i class="cusfont cusfont-warning "></i>未支付成功，请在支付页面继续完成支付！</p>
            <a class="form-btn form-btn-default" style="line-height: 24px; margin: 0 10px;" href="http://www.tmooc.cn/help/index.shtml" target="_blank">支付遇到问题</a>
            <button class="form-btn form-btn-blue" type="button" id="js_pay_btn">已支付完成</button>
        </div>
        <span class="cus-win-modelclose js-closewin-btn"><i class="cusfont cusfont-close font-14"></i></span>
    </div>
</div>
<!-- 支付状态弹窗 end -->
<!-- TTS用户验证start -->
<div style="display: none;">
    <div class="md2018041301lty bgcolor-fff cus-win-model" id="js_yz_video">
        <div class="tit-md">
            <span>提示</span>
            <span class="cus-win-modelclose js-closewin-btn"><i class="cusfont cusfont-close font-14"></i></span>
        </div>
        <div class="con-bd">
            <p class="font-16 text-center">您需要进行账号验证<br />请<a href='http://uc.tmooc.cn/userCenter/toUserCenterPage' class="link-color">点击此处</a>跳转</p>
        </div>
    </div>
</div>
<!-- TTS用户验证end -->

<!-- 在线报名start  -->
<div style="display: none;">
    <div class="md-2018040402-ll md2018041201lty cus-win-model" id="sign_uplty">
        <form action="" id="sign-formlty">
            <div class="tit">线上训练营课程领取申请表</div>
            <div class="form-ele-box form-inline-box">
                <div class="form-item clearfix">
                    <label class="form-label">手机号<span class="color-red">*</span></label>
                    <div class="form-inp-area">
                        <input class="form-input" value="" type="text" id="telephone" placeholder="请输入手机号" cusrule="phone" autocomplete="off">
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>请输入正确的手机号码</span>
                    </div>
                </div>
				<!--
                <div class="form-item clearfix">
                    <label class="form-label">QQ<span class="color-red">*</span></label>
                    <div class="form-inp-area ">
                        <input class="form-input" value="" type="text" id="qq" placeholder="请输入QQ号" cusrule="qq" autocomplete="off">
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>请输入5到11位的QQ号码</span>
                    </div>
                </div>
				-->
                <div class="form-item clearfix">
                    <label class="form-label">姓名<span class="color-red">*</span></label>
                    <div class="form-inp-area ">
                        <input class="form-input" value="" type="text" id="name" placeholder="请输入姓名" cusrule="ch_and_en" autocomplete="off">
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>请输入中文或英文</span>
                    </div>
                </div>
				<!--
                <div class="form-item clearfix select-item">
                    <label class="form-label">地址<span class="color-red">*</span></label>
                    <div class="form-inp-area " style="width:160px;margin-right:20px;">
                        <div class="x-choose-down">
                            <div class="x-ipt-group pull-left" id="js_province" >
                                <div class="custom_sel_text">请选择</div>
                                <ul class="custom_sel_list" style="display: none;">
                                </ul>
                                <span class="text-center">
                                    <i class="cusfont cusfont-under"></i>
                                    <i class="verflag"></i>
                                </span>
                                <input type="hidden" class="custom_sel_val" id="province" name="" value="" cusrule="required" >
                            </div>
                        </div>
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>不能为空</span>
                    </div>
                    <div class="form-inp-area " style="width:160px;">
                        <div class="x-choose-down">
                            <div class="x-ipt-group pull-left" id="js_city" >
                                <div class="custom_sel_text">请选择</div>
                                <ul class="custom_sel_list" style="display: none;">
                                </ul>
                                <span class="text-center">
                                    <i class="cusfont cusfont-under"></i>
                                    <i class="verflag"></i>
                                </span>
                                <input type="hidden" class="custom_sel_val" id="city" name="" value="" cusrule="required">
                            </div>
                        </div>
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>不能为空</span>
                    </div>
                </div>
				-->
                <div class="form-item clearfix select-item">
                    <label class="form-label">学科<span class="color-red">*</span></label>
                    <div class="form-inp-area " style="width:160px;margin-right:20px;">
                        <div class="x-choose-down">
                            <div class="x-ipt-group pull-left" id="js_subject" >
                                <div class="custom_sel_text">请选择</div>
                                <ul class="custom_sel_list" style="display: none;">
                                </ul>
                                <span class="text-center">
                                    <i class="cusfont cusfont-under"></i>
                                    <i class="verflag"></i>
                                </span>
                                <input type="hidden" class="custom_sel_val" id="subject" name="" value="" cusrule="required">
                            </div>
                        </div>
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>不能为空</span>
                    </div>
                    <div class="form-inp-area " style="width:160px;">
                        <div class="x-choose-down">
                            <div class="x-ipt-group pull-left" id="js_course" >
                                <div class="custom_sel_text">请选择</div>
                                <ul class="custom_sel_list" style="display: none;">
                                </ul>
                                <span class="text-center">
                                    <i class="cusfont cusfont-under"></i>
                                    <i class="verflag"></i>
                                </span>
                                <input type="hidden" class="custom_sel_val" id="course" name="" value="" cusrule="required">
                            </div>
                        </div>
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>不能为空</span>
                    </div>    
                </div>
                <div class="form-item clearfix">
                    <label class="form-label">验证码<span class="color-red">*</span></label>
                    <div class="form-inp-area">
                        <input id="js_imgCode_lty" class="form-input pull-left" cusrule="code_en" autocomplete="off" cuslength="4" value="" type="text" placeholder="验证码" style="width: 110px; margin-right: 15px;">
                        <img id="js_validate_img_lty" class="pull-left code-img js-validate-img-lty"  height="40px" width="80px" style="cursor:pointer;margin-right: 15px;">
                        <div class="form-inlineblock pull-left code-btn js-validate-img-lty" style="width:120px;">
                            <span class="verflag" style="cursor: pointer;">看不清楚？换一张</span>
                            <i class="verflag"></i>
                        </div>
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>请输入正确的验证码</span>
                    </div>
                </div>
                <div class="form-item clearfix">
                    <label class="form-label">动态码<span class="color-red">*</span></label>
                    <div class="form-inp-area" style="width:230px;">
                        <input id="js_phoneCode_lty" class="form-input pull-left" cusrule="required" autocomplete="off" value="" type="text" placeholder="动态码">
                        <span class="form-tips"><i class="cusfont cusfont-warning"></i>请输入正确的动态码</span>
                    </div>
                    <button id="js_getPhoneCode" class="form-btn form-btn-blue pull-right" type="button">获取动态码</button>
                </div>
				<!--
                <div class="form-item clearfix">
                    <label class="form-label">备注</label>
                    <div class="pull-left" style="width:340px;">
                        <textarea name=""  cols="" rows="" class="form-input form-textarea" id="remark"></textarea>
                        <p class="font-14 rest-num">还可以输入<span class="total-num" id="js_total_lty">255</span>个字符</p>
                    </div>
                </div>
				-->
                <div class="form-item clearfix ">
                    <button class="form-btn form-btn-blue  sign-btn" id="js_sign_btn" type="button">提交</button>
                </div>
                
              
            </div>
            </form>
        <span class="cus-win-modelclose js-closewin-btn"><i class="cusfont cusfont-close font-14"></i></span>    
    </div>
</div>
<!-- 在线报名end  -->
<!-- 右侧悬浮框 start -->
<div class="md2018040901lty">
    <div class="nav-r bgcolor-fff">
        <ul class="guide-list">
            <li><a href="https://tb.53kf.com/code/client/10120883/17" target="_blank"><img src="http://cdn.tmooc.cn/tmooc-web/css/img/service.gif"/></a></li>
            <li class="sign-up-lty"><a id="js_sign_up" href="#"><i class="cusfont cusfont-sign-up"></i></a></li>
             <li class="ph">
               	   <a href="javascript:void(0)">
                    <i class="cusfont cusfont-phone"></i>
                    <div class="ph-show bgcolor-fff" style="height: 48px;left: -185px;width: 159px;line-height: 22px;">
                        <i></i>
                        <p style="font-size: 14px"><i class="cusfont cusfont-phone"></i>400-827-0010 <br><span style="font-size: 12px">【服务时间：9:00-18:00】</span></p>
                    </div>
                </a>
            </li>
            <li id="js_comback"><a href="#"><i class="cusfont cusfont-comeback"></i></a></li>
        </ul>
    </div>
</div>
<!-- 右侧悬浮框 end -->

<!-- <script src="http://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js"></script> -->
<script src="http://cdn.tmooc.cn/tmooc-web/js/jsmd5.js"></script>
<script type="text/javascript">
    $(function(){
        initLoginFn(); //初始化登录
        getUserLoginStatus(); //获取用户登录状态信息

        /*点击搜索按钮*/
        $('#js_control_search').click(function(){
            var k_ = $.trim($('#js_search_inp').val());

            if(window.SEARCHPAGE_){
                if(k_){
                    $('.js-key-word').eq(0).text(k_);
                    resetSearch(1);
                    flag_ = true;
                    getClasslset(getSearchobj({searchCore:k_}));
                }else {
                    layer.msg('请输入搜索内容');
                    return;
                }
            }else {
                location.href='http://www.tmooc.cn/search/index.shtml#searchCore='+encodeURI(encodeURI(k_));//+'categoryId='+($(".js-lv-xxw span.curx").data('id') || "0");
            }
            $('#js_search_inp').val('');
        });
        $('#js_search_inp').keypress(function(e){
            if(e.keyCode===13){
                $('#js_control_search').trigger('click');
            }
        });
    });
</script>
<!-- 百度统计start  -->
<script>
var _hmt = _hmt || [];
$(function(){
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?51179c297feac072ee8d3f66a55aa1bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
});
</script>
<!-- 百度统计end  -->
<!-- 加载微信start 因部分中心不能访问微信，因此延时加载，防止阻塞 -->
<script>
$(function(){
  (function() {
    var wx = document.createElement("script");
    wx.src = "http://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js";
    var wx_s = document.getElementsByTagName("script")[0]; 
    wx_s.parentNode.insertBefore(wx, wx_s);
  })();
});
</script>
<!-- 加载微信end  -->

    </div>

    <script src="http://cdn.tmooc.cn/tmooc-web/js/customScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="http://cdn.tmooc.cn/tmooc-web/js/kindeditor/kindeditor-min.js"></script>
    <script src="http://cdn.tmooc.cn/tmooc-web/js/colorbox/jquery.colorbox-min.js"></script>
    <script src="http://cdn.tmooc.cn/tmooc-web/js/qrcode/qrcode.min.js"></script>
    <script src="http://cdn.tmooc.cn/tmooc-web/js/layer/layer.js"></script>
    <script src="http://cdn.tmooc.cn/tmooc-web/js/app.js"></script>
    
    <script>
    var orderStatus;
    /**
     * 跳转到支付中心
     */
    function toPaymentCenter(orderType,orderId){
    	window.open(UC_PATH_ + "/tmoocPay/toPaymentCenter?orderType="+orderType+"&orderId="+orderId);
    	openPayStatusFn(); //打开支付状态弹窗
    }
    /**
     * 创建微信扫码支付订单
     */
    function wxNativeCreateOrder(orderType,orderId){
        $.ajax({
        	url : UC_PATH_+"/tmoocPay/wxPayPcCreateOrder",
            type: "post", 
            dataType: "json",
            data:{
            	orderType : orderType,
            	orderId : orderId
            },
            success: function (data) {
            	
            	if(data && data.code == "1"){
            		//创建订单成功
    				wxPayModel({ 
    					money: data.obj.price, 
    					qrcode: data.name 
    				})
    				//轮询查询订单状态
    				//setInterval 每隔3000ms执行一次
    				var startTimes = new Date().getTime();
    				var times = 15*60*1000;
    				 orderStatus = setInterval(function(){
    					var now = new Date().getTime();
    					if((now-startTimes)>times){
    						window.location.reload();
    					}else{
    						$.ajax({
    							type: "POST",
    							url: UC_PATH_ + "/tmoocPay/findOrderStatus",
    							data: { 
    								"orderNumber": data.id ,
    								orderType : orderType
    							},
    							dataType: "json",
    							success: function (result) {
    								if(result.code == 1){
    									clearInterval(orderStatus);
    									$.colorbox.close();
    									//跳转到课程详情页
    									layer.msg('购买成功,3秒后自动跳转...');
						        		setTimeout(function () {
						                    //跳转到tmooc首页
						                    window.location.href=result.obj;
						                }, 3000)
    								}
    							}
    						})
    					}
    					
    				},3000)
            	}
            	if(data && data.code == "-8001"){
            		$('#toBuy').attr("disabled",false);
            		layer.msg("请登录！");
            	}
            	if(data && data.code == "-1120"){
            		$('#toBuy').attr("disabled",false);
                    layer.msg("已经购买过啦！");
                }
            	if(data && data.code == "-1"){
                    layer.msg("系统异常，请稍后重试！");
                }
            }
        })
    }


    /**
     * 支付宝支付
     */
    function alipayCreateOrder(orderType,orderId){
    	var data = {orderType:orderType};
    	if(orderType == '10011001'){
    		data.courseId = orderId;
    	}
    	if(orderType == '10011002'){
    		data.cardTypeId = orderId;
    	}
    	var url = UC_PATH_ + "/tmoocPay/createOrder";
    	$.ajax({
    		type: "POST",
    		url: url,
    		data: data,
    		dataType: "json",
    		success: function (result) {
    			if (result.code == 1) {
    				var d = result.obj.split('<form');
            		d[0] = '<form ';
                    d=d.join('');
                    d=d.slice(0, d.indexOf('<script>'));
                    $('#form_pay').html(d);
            		
    		        $('#alipaysubmit').submit(); //提交表单

    			} else {
    				$('#toBuy').attr("disabled",false);
    				layer.msg("调取接口失败，请稍后重试！");
    			}

    		},
    		error: function () {
    			console.info("error");
    		}
    	});
    }
        function wxPayModel(opts) {
            var options = $.extend(true, {
                money: 0.00,
                duration: 15 * 60,
                qrcode: '',
                onOpen: ''
            }, opts);
            var timer = null;
            var dy_time = function (sec) {
                var _min = Math.ceil(sec / 60) - 1;
                var _sec = (sec % 60) || '60';

                $('#js_wxDuration').html('请在 ' + _min + ' 分钟 ' + _sec + ' 秒内完成支付');
            }
            $('#js_wxMoney').html('微信支付 ¥' + options.money);
            $.colorbox && $.colorbox.close();

            $.colorbox({
                escKey: false,
                inline: true,
                overlayClose: false,
                closeButton: false,
                href: '#js_wxpay',
                onComplete: function (inst) {
                    // 计时
                    if (options.duration > 0) {
                        var _sec = options.duration;
                        dy_time(_sec);
                        clearInterval(timer);
                        timer = setInterval(function () {
                            if (_sec <= 1) {
                                clearInterval(timer);
                                $.colorbox && $.colorbox.close();
                                return
                            }
                            _sec--;
                            dy_time(_sec);
                        }, 1000)
                    }
                    // qr-code
                    new QRCode($('#js_wxQR')[0], {
                        text: options.qrcode,
                        width: 200,
                        height: 200
                    });

                    options.onOpen && options.onOpen(inst);
                },
                onClosed: function () {
                    clearInterval(timer);
                    clearInterval(orderStatus);
                    $('#toBuy').attr("disabled",false);
                    $('#js_wxQR img').attr('src','');
                }
            })
        }
        
        function findOrderMsg(orderType,orderId){
        	$.ajax({
        		type: "POST",
    			url: UC_PATH_ + "/m/tmoocPay/findOrderMsg",
    			data: { "orderType": orderType, "orderId": orderId },
    			dataType: "json",
    			success: function (result) {
    				if(result.obj.orderImgUrl){
	    				$('#order-url').attr('src',result.obj.orderImgUrl);
    				}else{
    					$('#order-url').attr('src',"http://cdn.tmooc.cn/tmooc-web/css/img/20190801-vip-card.png");
    				}
    				
    					$('#order-name').html(result.obj.goodsName);
    					$('#price').html(result.obj.price);
    				}
        	})
        }
        
        $(function () {
        	//切换支付方式
        	$('.pay-list').click(function(){
        		$('.pay-list').removeClass('active');
        	    $(this).addClass('active');
        	});
	        	var orderType= get_hash('orderType');
	        	var orderId = get_hash('orderId');
        	//获取商品详情
        	findOrderMsg(orderType,orderId)
        	//切换支付方式
        	$('.pay-list').click(function(){
        		$('.pay-list').removeClass('active');
        	    $(this).addClass('active');
        	});
        	
        	/* 创建订单，发起支付 */
        	$('#toBuy').click(function(){
        		//支付宝支付
            	$('#toBuy').attr("disabled",true);
                if(!$("#courseService").is(":checked")){
                	$('#toBuy').attr("disabled",false);
                    layer.msg("请知晓并勾选左下方的课程服务协议！");
                    return false;
                }
        		var type = $('.pay-list.active').data('type');
        		if(type == 'wx'){
        			//微信支付
        			wxNativeCreateOrder(orderType,orderId);
        		}
                if(type == 'alipay'){
                	
                	//支付宝支付
                	alipayCreateOrder(orderType,orderId);
                }
            });
        });

        
        // wxPayModel({ money: 488, qrcode: 'http://www.tmooc.cn/' })
    </script>
</body>

</html>