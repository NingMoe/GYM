define("ouj_sdk",function(require,exports,module){var $=require("jquery");if(!window.BDY){BDY={url:"http://www.hiyd.com/",userUrl:"http://user.api.ouj.com/"}}$=$||window.jQuery;var _fromUrl;var _loginCallback;exports.login=login;exports.loginwb=loginwb;exports.loadJs=loadJs;exports.register=register;exports.logout=logout;exports.redirect=redirect;exports.getParam=getParam;exports.getParam2=getParam2;exports.init=init;function _loadJquery(callback){if(!window.jQuery){var url=BDY.url+"static/js/libs/jquery-1.11.1.js?19f27269dbe008d7";loadJs(url,function(){$=jQuery;callback()})}else{$=window.jQuery;callback()}}function loadJs(url,callback){var script=document.createElement("script");script.src=url;script.charset="utf-8";script.onload=callback;var header=document.getElementsByTagName("head")[0];header.insertBefore(script,header.firstChild)}function login(fromUrl,callback){_fromUrl=fromUrl;var url=BDY.url+"user/login/";$.get(url,function(res){$("body").append(res);_loginCallback=callback},"jsonp")}function loginwb(fromUrl){_fromUrl=fromUrl;BDY.shopUrl="http://shop.api.ouj.com/";var url=BDY.shopUrl+"weibo/login?url="+fromUrl;$.get(url,function(objResult){if(!objResult.result){if(objResult.data){document.location.href=objResult.data}}else{redirect()}},"json")}function redirect(){if(typeof _loginCallback=="function"){_loginCallback&&_loginCallback()}else{if(typeof _fromUrl=="string"){document.location.href=_fromUrl}else{location.reload()}}}function register(){var fromUrl=getParam("fromUrl")||document.location.href;location.href=BDY.url+"user/register/?fromUrl="+fromUrl}function logout(fromUrl){var time=new Date;time.setTime(time.getTime()-1*864e5);time=time.toUTCString();var url=BDY.url+"user/logout/";$.post(url,function(ret){if(ret.code==0){if(/hiyd.com/.test(document.location.href)){var domain="domain=hiyd.com;"}else{var domain="domain="+document.domain}document.cookie="appid=; expires="+time+"; path=/;"+domain;document.cookie="otoken=; expires="+time+"; path=/;"+domain;document.cookie="ouid=; expires="+time+"; path=/;"+domain;document.cookie="ouj_token=; expires="+time+"; path=/;";_fromUrl=fromUrl;redirect()}})}function init(){_fromUrl=getParam("fromUrl");_loadJquery(initEvent)}function initEvent(){$("#btn_ouj_login").click(function(){login()});$("#btn_ouj_register").click(function(){register()});$("#btn_ouj_logout").click(function(){logout()});$("#btn_ouj_loginwb").click(function(){loginwb(document.location.href)})}function getParam(name){var str=document.location.hash.substr(2);var value=getParam2(name,str);if(value==null){str=document.location.search.substr(1);value=getParam2(name,str)}return value}function getParam2(name,str){var reg=new RegExp("(^|!|&)"+name+"=([^&]*)(&|$)");r=str.match(reg);if(r!=null){try{return decodeURIComponent(r[2])}catch(e){window.console&&console.log(e+"r[2]:"+r[2]);return null}}return null}});